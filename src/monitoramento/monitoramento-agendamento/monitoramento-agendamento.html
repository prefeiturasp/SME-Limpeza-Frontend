<form novalidate name="formulario" ng-submit="vm.salvar(formulario)" autocomplete="off" autocorrect="off">

  <div class="modal-header">
    <h5 class="modal-title">AGENDAMENTO MANUAL</h5>
    <button type="button" class="close" ng-click="vm.fecharModal()">
      <span aria-hidden="true">×</span>
    </button>
  </div>

  <div class="modal-body">

    <div class="row">
      <div class="col-sm-12 col-md-4 col-lg-4 stretch-card">
        <div class="card">
          <div class="card-body">
            <h4 class="card-title">Dados gerais</h4>
            <p class="text-muted font-weight-light">Informações do ambiente da unidade escolar e turno de
              realização do monitoramento.</p>
            <div class="row">
              <div class="col-12">
                <div class="form-group">
                  <label for="data" class="dois-pontos">Data do monitoramento</label>
                  <input type="text" class="form-control" id="data" ng-model="vm.model.data"
                    uib-datepicker-popup="dd/MM/yyyy" datepicker-options="vm.optionsDatePicker" is-open="focus1"
                    ng-focus="focus1=true" required>
                </div>
              </div>
              <div class="col-12">
                <div class="form-group">
                  <label for="turno" class="obrigatorio d-block">Turno(s)</label>
                  <div class="d-inline icheck-success" ng-repeat="t in vm.turnoList">
                    <input type="checkbox" id="checkbox-{{t.id}}" ng-model="t.isSelected">
                    <label class="sem-dois-pontos font-weight-normal mr-2"
                      for="checkbox-{{t.id}}">{{t.descricao}}</label>
                  </div>
                </div>
              </div>

              <div class="col-12" ng-if="usuario.usuarioOrigem.codigo != 'ue'">
                <div class="form-group">
                  <label for="ue" class="obrigatorio">Unidade Escolar</label>
                  <ui-select id="ue" ng-model="vm.model.unidadeEscolar" ng-change="vm.evtChangeUnidadeEscolar()">
                    <ui-select-match allow-clear="false" placeholder="Selecione">{{$select.selected.codigo}} -
                      {{$select.selected.descricao}}</ui-select-match>
                    <ui-select-choices repeat="ue in vm.unidadeEscolarList | filter: $select.search">
                      <span class="mb-0 d-block" ng-bind-html="ue.descricao | highlight: $select.search"></span>
                      <small class="my-2" ng-bind-html="ue.codigo | highlight: $select.search"></small>
                      <small class="my-2"> - </small>
                      <small class="my-2" ng-bind-html="ue.tipo | highlight: $select.search"></small>
                    </ui-select-choices>
                  </ui-select>
                </div>
              </div>

              <div class="col-12 mt-1"
                ng-if="usuario.usuarioOrigem.codigo !== 'dre' || (usuario.usuarioOrigem.codigo === 'dre' && vm.model.unidadeEscolar)">
                <div class="form-group">
                  <div class="d-flex justify-content-between">
                    <label for="ambiente-ue" class="dois-pontos">Ambiente da Unidade Escolar</label>
                    <a href="#" class="btn btn-link btn-fw p-0" ng-click="vm.selecionarTodosAmbientes()">Selecionar
                      todos</a>
                  </div>


                  <div class="table-responsive" ng-if="vm.ambienteUnidadeEscolarList.length > 0">
                    <table class="table p-relative d-block" ng-style="{ 'max-height': '225px' }"
                      style="overflow: auto; overscroll-behavior: contain">
                      <tbody class="p-relative">
                        <tr ng-repeat="aue in vm.ambienteUnidadeEscolarList | filter: vm.filter | limitTo: vm.limit"
                          in-view="vm.loadMoreAmbientes($last, $inview)">
                          <td class="text-center p-2">
                            <div class="d-inline icheck-success">
                              <input type="checkbox" id="checkbox-{{aue.id}}" ng-model="aue.isSelected">
                              <label class="sem-dois-pontos font-weight-normal" for="checkbox-{{aue.id}}"></label>
                            </div>
                          </td>
                          <td class="w-100 px-2" ng-bind="aue.descricao"></td>
                        </tr>
                      </tbody>
                    </table>
                  </div>
                </div>
              </div>

            </div>
          </div>
        </div>
      </div>
      <div class="col-sm-12 col-md-8 col-lg-8 stretch-card">
        <div class="card">
          <div class="card-body">
            <h4 class="card-title">Atividades</h4>
            <p class="text-muted font-weight-light">Descrição das atividades deste plano de trabalho.
            <div class="row">
              <div class="col-12">
                <div class="form-group">
                  <summernote config="vm.optionsSummernote" ng-model="vm.model.descricao" required>
                  </summernote>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="modal-footer">
    <button type="submit" class="btn btn-success" ng-disabled="!vm.verificarFormulario(formulario)">Agendar
      Monitoramento</button>
  </div>

</form>