<div class="card">
  <div class="card-body">

    <h4 class="card-title">IMPORTAÇÃO DE UNIDADES ESCOLARES NO CONTRATO
      <button type="button" class="close" style="margin-top: -8px;" ng-click="vm.fecharModalImportacao()">
        <span aria-hidden="true">×</span>
      </button>
    </h4>


    <div class="card mt-4">
      <div class="card-body">
        <h4 class="card-title">Arquivo de Dados</h4>
        <p class="card-description">
          Certifique-se que seu arquivo possua a estrutura de dados necessária para a importação e o carregue
          abaixo para importar as UE's para o Contrato.
        </p>

        <div class="row mb-4">
          <div class="col-6">
            <ul class="list-ticked">
              <li>Formato: CSV</li>
              <li>Cabeçalho: codigo;valor;data_inicial;data_final</li>
              <li>Obrigatoriedade: Todos</li>
              <li>Separador: ponto e vírgula (;)</li>
              <li>Linha Zero: Cabeçalho</li>
              <li>Chave: Código</li>
            </ul>
          </div>
          <div class="col-6">
            <ul class="list-ticked">
              <li>As UE's já devem estar cadastradas no sistema.</li>
              <li>Case Sensitive: Não</li>
              <li>Formato da Data: DD/MM/YYYY</li>
              <li>Colunas com validação: codigo;valor</li>
              <li>Validação do Código: Existência na DRE</li>
              <li>Validação do Valor: Maior ou igual a zero</li>
            </ul>
          </div>
        </div>

        <botao-upload-arquivo id="upload" uploader="vm.uploader"
          ng-if="vm.uploadUtils && !vm.modalImportacao.resultado.length > 0"></botao-upload-arquivo>

      </div>
    </div>

    <div class="card mt-4" ng-if="vm.modalImportacao.resultado.length > 0">
      <div class="card-body p-0">
        <h4 class="card-title mx-4 mt-4 mb-2">Resumo da Importação</h4>
        <p class="card-description mx-4 mt-0">Verifique abaixo o resultado da importação de cada registro do
          arquivo carregado.</p>
        <table class="table table-striped">
          <thead>
            <th>Linha</th>
            <th>Resultado</th>
            <th>Unidade Escolar</th>
            <th>Data Inicial</th>
            <th>Data Final</th>
            <th>Valor</th>
          </thead>
          <tbody>
            <tr ng-repeat="ue in vm.modalImportacao.resultado track by $index">
              <td>{{($index+1) | zpad:2}}</td>
              <td class="uppercase text-{{ue.classeResultado}}" style="font-weight: 600;">
                {{ue.mensagemResultado}}</td>
              <td>
                <p class="mb-2" ng-bind="ue.descricao || ' - '"></p>
                <p class="mb-0 text-muted text-small" ng-if="ue.id">
                  Cód.: {{ue.codigo}} | Tipo: {{ue.tipoEscola.descricao}}</p>
              </td>
              <td ng-bind="(ue.dataInicial | date:'dd/MM/yyyy') || ' - '"></td>
              <td ng-bind="(ue.dataFinal | date:'dd/MM/yyyy') || ' - '"></td>
              <td ng-bind="(ue.valor | finance:true:2) || ' - '"></td>
            </tr>
          </tbody>
        </table>

        <div class="card-footer d-flex justify-content-between">
          <button type="button" class="btn btn-ligth" ng-click="vm.fecharModalImportacao()">Cancelar</button>
          <button type="button" class="btn btn-success" ng-click="vm.salvarUnidadeEscolarCarregada()">Salvar
            UE's encontradas</button>
        </div>

      </div>

    </div>
  </div>
</div>